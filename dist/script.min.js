"use strict";console.clear();var tasks=[],aboutTasks=[],times=[],dates=[],completeTasks=[],categories=[],priorities=[],createdCounter=0,completedCounter=0,pendingCounter=0,deadLineTimeDetails={},currentTimeDetails=new Date,diff=0,iconNumberClicked=0,logoReload=document.querySelector(".left-group").addEventListener("click",function(){window.location.reload()}),logoReloadFooter=document.querySelector("footer .left-group").addEventListener("click",function(){window.location.reload()}),sortByCategory=document.querySelector(".sort-category"),sortByPriority=document.querySelector(".sort-priority"),aboutTaskInput=document.querySelector(".create-gear .about-task"),modalAboutTask=document.querySelector(".modal-content .about-task"),clearlocalBtn=document.querySelector(".local-clear"),pendingTasksSpan=document.querySelector(".pending-tasks span"),completedTasksSpan=document.querySelector(".completed-tasks span"),addTaskButton=document.querySelector(".add-tasks"),taskInput=document.querySelector(".task"),timeInput=document.querySelector(".time"),dateInput=document.querySelector(".date"),taskList=document.querySelector(".task-list"),dayWeek=document.querySelector(".title-day-week"),monthSpan=document.querySelector(".month"),dateCalendar=document.querySelector(".title-date-calendar"),tasksCreatedSpan=document.querySelector(".created-tasks span"),searchInput=document.querySelector(".search-input"),searchBtn=document.querySelector(".searchBtn"),modal=document.querySelector(".modal"),changeBtn=document.querySelector(".change-btn"),exitIcon=document.querySelector(".close-icon"),categorySelect=document.getElementById("category"),prioritySelect=document.getElementById("priority");createdCounter=localStorage.getItem("createdTasks")?Number(localStorage.getItem("createdTasks")):0,completedCounter=localStorage.getItem("completedCounter")?Number(localStorage.getItem("completedCounter")):0,pendingCounter=localStorage.getItem("pendingCounter")?Number(localStorage.getItem("pendingCounter")):0,tasksCreatedSpan.textContent=createdCounter,completedTasksSpan.textContent=completedCounter,pendingTasksSpan.textContent=pendingCounter;var months=["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],currentMonth=months[(new Date).getMonth()];monthSpan.textContent=currentMonth;var days=["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],currentDay=days[(new Date).getDay()];dayWeek.textContent=currentDay;var date=new Date,currentDataDay=date.getDate(),monthsEng=["January","February","March","April","May","June","July","August","September","October","November","December"],monthName=monthsEng[date.getMonth()],year=date.getFullYear();function generateCalendar(){for(var e=new Date,t=e.getDate(),a=new Date(e.getFullYear(),e.getMonth(),1).getDay(),o=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),n=document.querySelector("table"),r=1,s=Math.ceil((t+a)/7),l=0;l<6;l++){var c=n.insertRow(),i=c.insertCell();i.textContent=s++,i.classList.add("week-number");for(var d=0;d<7;d++){var u=c.insertCell();0===l&&d<a||o<r?u.textContent="":((u.textContent=r)===t&&(u.classList.add("highlight"),document.querySelectorAll(".day-header")[d].classList.add("highlight"),i.classList.add("highlight")),r++)}}}function searchNames(){var a=searchInput.value.toLowerCase();document.querySelectorAll(".task-row").forEach(function(e){var t=e.querySelector(".element-task").textContent.toLowerCase();e.style.display=t.includes(a)?"flex":"none"})}function openModal(){document.getElementById("myModal").style.display="block",document.getElementById("modalOverlay").style.display="block"}function closeModal(){document.getElementById("myModal").style.display="none",document.getElementById("modalOverlay").style.display="none"}function confirmAction(){localStorage.clear(),closeModal(),alert("localStorage очищений!"),window.location.reload()}function cancelAction(){closeModal()}function restoreTasks(){var e=localStorage.getItem("mytasks"),t=localStorage.getItem("aboutTasks"),a=localStorage.getItem("mytimes"),o=localStorage.getItem("mydates"),n=localStorage.getItem("mycompletetasks"),r=localStorage.getItem("categories"),s=localStorage.getItem("priorities");e&&(tasks=JSON.parse(e),aboutTasks=JSON.parse(t),times=JSON.parse(a),dates=JSON.parse(o),completeTasks=JSON.parse(n),categories=JSON.parse(r),priorities=JSON.parse(s),tasks.forEach(function(e,t){createTaskElement(e,aboutTasks[t],times[t],dates[t],completeTasks[t],categories[t],priorities[t],t)}))}function distanceDates(e){return[Math.trunc(e/6e4)%60,Math.trunc(e/36e5)%24,Math.trunc(e/864e5)]}function createTaskElement(e,t,a,o,n,r,s,l){var c=document.createElement("div");c.setAttribute("class","task-row"),c.setAttribute("data-number",l),c.setAttribute("data-category",r),c.setAttribute("data-priority",s);var i=document.createElement("div"),d=document.createElement("div"),u=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div");i.setAttribute("class","element-task"),d.setAttribute("class","about-element-task"),u.setAttribute("class","deadline"),m.setAttribute("class","category-badge"),p.setAttribute("class","priority-badge");var y=document.createElement("i"),g=document.createElement("i"),k=document.createElement("i");switch(y.classList="fa-solid fa-check",g.classList="far fa-edit",k.classList="fas fa-window-close",y.addEventListener("click",n?backTask:doneTask),g.addEventListener("click",showModal),k.addEventListener("click",deleteTask),i.textContent=e,d.textContent=t||"",m.textContent=r,p.textContent=s){case"urgently-important":p.style.color="black";break;case"urgently-notimportant":p.style.color="gold";break;case"noturgently-important":p.style.color="#261FB3";break;case"noturgent-notimportant":p.style.color="green"}if(n)u.textContent="ВИКОНАНО",y.classList="fa-solid fa-reply",g.style.pointerEvents="none",i.style.textDecoration="line-through",d.style.textDecoration="line-through";else{var S=o.split("-").map(Number),f=a.split(":").map(Number),v=new Date(S[0],S[1]-1,S[2],f[0],f[1]);diff=v-currentTimeDetails,u.textContent=diff<0?"Часу не залишилось":"Залишось ".concat(distanceDates(diff)[2]," дн. ").concat(distanceDates(diff)[1]," год. ").concat(distanceDates(diff)[0]," хв.")}var C=document.createElement("div");C.classList.add("card-context"),C.appendChild(i),C.appendChild(d),C.appendChild(u);var h=document.createElement("div");h.classList.add("badges"),h.appendChild(m),h.appendChild(p);var b=document.createElement("div");b.classList.add("icons"),b.appendChild(y),b.appendChild(g),b.appendChild(k),c.appendChild(C),c.appendChild(h),c.appendChild(b),taskList.appendChild(c)}function showModal(){modal.style.display="flex",document.getElementById("modalOverlay").style.display="block";var e=this.closest(".task-row").dataset.number,t=document.querySelector(".task-modal"),a=document.querySelector(".modal-content .about-task"),o=document.querySelector(".time-modal"),n=document.querySelector(".date-modal");t.value=tasks[e],a.value=aboutTasks[e],o.value=times[e],n.value=dates[e],iconNumberClicked=e}function doneTask(){var e=this.closest(".task-row"),t=e.dataset.number,a=e.querySelector(".element-task"),o=e.querySelector(".about-element-task"),n=e.querySelector(".deadline"),r=e.querySelector(".fa-check"),s=e.querySelector(".fa-edit");a.style.textDecoration="line-through",o.style.textDecoration="line-through",n.textContent="ВИКОНАНО",r.classList="fa-solid fa-reply",s.style.pointerEvents="none",completeTasks[t]=1,localStorage.setItem("mycompletetasks",JSON.stringify(completeTasks)),completedCounter++,completedTasksSpan.textContent=completedCounter,localStorage.setItem("completedCounter",completedCounter),r.removeEventListener("click",doneTask),r.addEventListener("click",backTask)}function backTask(){var e=this.closest(".task-row"),t=e.dataset.number,a=e.querySelector(".element-task"),o=e.querySelector(".about-element-task"),n=e.querySelector(".deadline"),r=e.querySelector(".fa-reply"),s=e.querySelector(".fa-edit");a.style.textDecoration="none",o.style.textDecoration="none",s.style.pointerEvents="auto",r.classList="fa-solid fa-check";var l=dates[t].split("-").map(Number),c=times[t].split(":").map(Number),i=new Date(l[0],l[1]-1,l[2],c[0],c[1]);diff=i-currentTimeDetails,n.textContent=diff<0?"Часу не залишилось":"Залишось ".concat(distanceDates(diff)[2]," дн. ").concat(distanceDates(diff)[1]," год. ").concat(distanceDates(diff)[0]," хв."),completeTasks[t]=0,localStorage.setItem("mycompletetasks",JSON.stringify(completeTasks)),completedCounter--,completedTasksSpan.textContent=completedCounter,localStorage.setItem("completedCounter",completedCounter),r.removeEventListener("click",backTask),r.addEventListener("click",doneTask)}function deleteTask(){var e=this.closest(".task-row"),t=e.dataset.number;e.remove(),tasks.splice(t,1),aboutTasks.splice(t,1),times.splice(t,1),dates.splice(t,1),completeTasks.splice(t,1),categories.splice(t,1),priorities.splice(t,1),0<createdCounter&&(createdCounter--,tasksCreatedSpan.textContent=createdCounter,localStorage.setItem("createdTasks",createdCounter)),localStorage.setItem("mytasks",JSON.stringify(tasks)),localStorage.setItem("aboutTasks",JSON.stringify(aboutTasks)),localStorage.setItem("mytimes",JSON.stringify(times)),localStorage.setItem("mydates",JSON.stringify(dates)),localStorage.setItem("mycompletetasks",JSON.stringify(completeTasks)),localStorage.setItem("categories",JSON.stringify(categories)),localStorage.setItem("priorities",JSON.stringify(priorities)),document.querySelectorAll(".task-row").forEach(function(e,t){e.setAttribute("data-number",t)})}dateCalendar.textContent="".concat(currentDataDay,", ").concat(monthName," ").concat(year),generateCalendar(),searchInput.addEventListener("input",searchNames),searchBtn.addEventListener("click",searchNames),clearlocalBtn.addEventListener("click",openModal),restoreTasks(),addTaskButton.addEventListener("click",function(){var e=taskInput.value.trim(),t=aboutTaskInput.value.trim(),a=timeInput.value,o=dateInput.value;if(!e)return alert("Будь ласка, введіть назву завдання!"),void taskInput.focus();if(!t)return alert("Будь ласка, введіть опис завдання!"),void aboutTaskInput.focus();if(!a)return alert("Будь ласка, виберіть час!"),void timeInput.focus();if(!o)return alert("Будь ласка, виберіть дату!"),void dateInput.focus();var n=new Date;if(new Date(o+"T"+a)<n)alert("Дата та час завдання не можуть бути в минулому!");else{var r=categorySelect.value,s=prioritySelect.value;tasks.push(e),aboutTasks.push(t),times.push(a),dates.push(o),completeTasks.push(0),categories.push(r),priorities.push(s),createTaskElement(e,t,a,o,0,r,s,tasks.length-1),createdCounter++,tasksCreatedSpan.textContent=createdCounter,localStorage.setItem("createdTasks",createdCounter),localStorage.setItem("mytasks",JSON.stringify(tasks)),localStorage.setItem("aboutTasks",JSON.stringify(aboutTasks)),localStorage.setItem("mytimes",JSON.stringify(times)),localStorage.setItem("mydates",JSON.stringify(dates)),localStorage.setItem("mycompletetasks",JSON.stringify(completeTasks)),localStorage.setItem("categories",JSON.stringify(categories)),localStorage.setItem("priorities",JSON.stringify(priorities)),taskInput.value="",aboutTaskInput.value="",timeInput.value="",dateInput.value=""}}),exitIcon.addEventListener("click",function(){modal.style.display="none",document.getElementById("modalOverlay").style.display="none"}),changeBtn.addEventListener("click",function(){var e=document.querySelector(".task-modal"),t=document.querySelector(".modal-content .about-task"),a=document.querySelector(".time-modal"),o=document.querySelector(".date-modal"),n=iconNumberClicked,r=document.querySelector('.task-row[data-number="'.concat(n,'"]'));if(r){var s=r.querySelector(".element-task"),l=r.querySelector(".about-element-task"),c=r.querySelector(".deadline");tasks[n]=e.value,aboutTasks[n]=t.value,times[n]=a.value,dates[n]=o.value,s.textContent=e.value,l.textContent=t.value;var i=o.value.split("-").map(Number),d=a.value.split(":").map(Number),u=new Date(i[0],i[1]-1,i[2],d[0],d[1]);diff=u-currentTimeDetails,c.textContent=diff<0?"Часу не залишилось":"Залишось ".concat(distanceDates(diff)[2]," дн. ").concat(distanceDates(diff)[1]," год. ").concat(distanceDates(diff)[0]," хв."),localStorage.setItem("mytasks",JSON.stringify(tasks)),localStorage.setItem("aboutTasks",JSON.stringify(aboutTasks)),localStorage.setItem("mytimes",JSON.stringify(times)),localStorage.setItem("mydates",JSON.stringify(dates)),pendingCounter++,pendingTasksSpan.textContent=pendingCounter,localStorage.setItem("pendingCounter",pendingCounter),modal.style.display="none",document.getElementById("modalOverlay").style.display="none"}}),sortByPriority.addEventListener("click",function(){var e=Array.from(document.querySelectorAll(".task-row"));e.sort(function(e,t){var a={"urgently-important":0,"urgently-notimportant":1,"noturgently-important":2,"noturgent-notimportant":3},o=e.getAttribute("data-priority"),n=t.getAttribute("data-priority");return a[o]-a[n]}),taskList.innerHTML="",e.forEach(function(e,t){e.setAttribute("data-number",t),taskList.appendChild(e)})}),sortByCategory.addEventListener("click",function(){var e=Array.from(document.querySelectorAll(".task-row"));e.sort(function(e,t){var a=e.getAttribute("data-category"),o=t.getAttribute("data-category");return a.localeCompare(o)}),taskList.innerHTML="",e.forEach(function(e,t){e.setAttribute("data-number",t),taskList.appendChild(e)})});
//# sourceMappingURL=script.min.js.map
